+++
title = "Улучшаем работу в консоли с помощью tmux"
description = "Улучшаем работу в консоли с помощью tmux."
date = 2020-10-31
updated = 2020-10-31

[taxonomies]
tags = ["software", "awesomeware", "tmux"]
categories = ["software", "linux", "awesome"]
+++

tmux - это терминальный мультиплексор (terminal multiplexer). Терминальный мультиплексор - это приложение, 
которое способно объединять несколько сессий в одном псевдо-графическом интерфейсе.

Главные возможности tmux:

- Сохранность сессии.
- Возможность использовать множество суб-окон в главном окне.
- Возможность поделиться сессией. К сессии мультиплексора могут подключаться несколько пользователей.

**Сохранность текущей сессии**

По умолчанию, все интерактивные сессии посылают сигнал SIGHUP всем процессом запущенным в текущей сессии при отключении.
Если произошёл обрыв связи, то все команды которые вы запускали завершатся раньше ожидаемого времени выполнения.

При первом запуске мультиплексор создаёт отдельную сессию, которая не привязана к вашему соединению. Например, 
вы можете отключиться от SSH, но сессия будет активна на сервере. Затем вы можете вернуться на сервер и вернуться
в сессию с помощью команды:

```shell script
tmux attach
```

или с указанием имени сессии:

```shell script
tmux attach -t name
```

## Установка tmux

### CentOS, Fedora, RHEL, Oracle Linux

```shell script
sudo yum install -y tmux
```

### Ubuntu, Debian

```shell script
sudo apt install tmux
```

### ArchLinux

```shell script
sudo pacman -S tmux
```

### Как использовать

#### Создание сессии

```shell script
tmux new -s name
```

tmux отобразит пустой терминал на подобие такого:

![Стартовое окно tmux](/images/linux/tmux/tmux-start.png "Стартовое окно tmux")

#### Префикс для команд

Для использования команд нужно использовать комбинацию-префикс.
По умолчанию, префикс - `ctrl+b`.

Например, чтобы создать новое окно, нажимаем `ctrl+b`, затем отпускаем и нажимаем `c`.

#### Создание нового окна

Комбинация: `prefix, c`.

#### Переключение между окнами

Вперёд: `prefix, n`

Назад: `prefix, p`

Переключение по номеру окна: `prefix + N`, где `N` - это номер окна.

#### Разделение окон и создание панелей

Комбинация: `prefix, "`

Например, можно разместить сверху вывод `htop`, а снизу `vmstat`:

![Разделение окна на панели](/images/linux/tmux/tmux-panes.png "Разделение окна на панели")

#### Переключение между панелями

На верхнее: `prefix, up`

На нижнее: `prefix, down`

На то что слева: `prefix, left`

На то что справа: `prefix, right`

#### Изменение размеров текущей панели

Комбинация: `prefix, ctrl + up\down`

#### Поменять панели местами

Комбинация: `prefix, {` или `prefix, }`

### Переключение между клиентами

Комбинации: `prefix, (` и `prefix, )`

#### Справка по командам

Комбинация: `prefix, ?`
