+++
title = "Как исправить глюки в консоли Windows 10 при подключении через SSH"
date = 2020-02-07

[taxonomies]
tags = ["windows", "linux", "ssh", "решение проблем", "troubleshooting"]
categories = ["tutorial"]
+++

Несколько лет назад Microsoft взяли курс на дружбу с операционными системами на базе ядра Linux. 
Благодаря этому в Windows 10 появились крутые возможности:

- **Встроенный SSH клиент**  
  Возможность подключаться через SSH прямо из консоли Windows.

- **Windows Subsystem for Linux**  
  Возможность использовать софт под linux прямо из консоли Windows, пусть и с рядом ограничений.
  
К сожалению, реализация OpenSSH клиента под Windows работает с ошибками. Одна из главный проблем это мигающий экран
в приложениях с псевдо-графикой. Из такого рода приложений я используют только классический Midnight Commander, поэтому
исправлять проблему будем прежде всего для него. Уверен что решение сработает и для остальных приложений. 

### Решение 

Решение простое - использовать SSH клиент из пакета [Git for Windows](https://git-scm.com/download/win).

1. Устанавливаем набор утилит [Git for Windows](https://git-scm.com/download/win), выбираем все субпакеты в процессе установки

2. Добавляем в переменную окружения `PATH` путь `до ssh.exe` из пакета `Git for Windows`:  
   Желательно добавить в начало значения переменной. Например, вот так:    
   ![alt text](/images/windows/windows-ssh-glitches-path.png "Переменные окружения")
   
3. Открываем Командную строку заново и пробуем использовать ssh клиент с запуском Midnight Commander

   ![alt text](/images/windows/windows-ssh-glitches-mc.png "Midnight Commander") 
    
Все работает как надо :)

### Правильный курс

Несмотря на известные проблемы со встроенным клиентом SSH и Linux-подсистемой для Windows я искренне верю что
Microsoft выбрали верное направление. Десятки лет администраторы Windows серверов не имели современной командной строки,
с историей команд, поиском, подстановкой и справочной системой на подобие man. Руководство Microsoft не считало нужным
развивать это направление и делало ставку на графические интерфейсы, мол тыкать мышкой всегда понятней и удобней.
Мировой опыт работы с Linux\Unix-системами доказал что это не так. 

Я верю что Сатья Наделла, действующий глава Microsoft, доведет интеграцию до уровня production ready.